name: Project Check Reminder

on:
  schedule:
    - cron: '0 8 1 2 *'  # 1er fÃ©vrier Ã  08:00 UTC
    - cron: '0 8 1 8 *'  # 1er aoÃ»t Ã  08:00 UTC
  workflow_dispatch:

jobs:
  create-reminder:
    runs-on: ubuntu-latest

    steps:
      - name: RÃ©cupÃ©rer la date du jour
        id: date
        run: echo "today=$(date +'%d/%m/%Y')" >> "$GITHUB_OUTPUT"

      - name: GÃ©nÃ©rer le contenu dynamique
        run: |
          cat > issue.md <<EOF
          ## ğŸ” Rappel semestriel : vÃ©rification des dÃ©pendances
          
          ğŸ“… Rappel gÃ©nÃ©rÃ© automatiquement le **$TODAY**
          
          ### ğŸ” VÃ©rifications Ã  faire :
          - [ ] VÃ©rification si mise Ã  jour des dÃ©pendances Java (Gradle, Spring, autres libs)
          - [ ] VÃ©rification si mise Ã  jour du JDK utilisÃ©
          - [ ] VÃ©rification si mise Ã  jour de JavaFX
          - [ ] VÃ©rification si mise Ã  jour des plugins Gradle
          - [ ] VÃ©rification si mise Ã  jour des bibliothÃ¨ques
          - [ ] VÃ©rification si mise Ã  jour des workflows GitHub Actions
          EOF
        env:
          TODAY: ${{ steps.date.outputs.today }}

      - name: CrÃ©er une issue de rappel
        uses: peter-evans/create-issue-from-file@v5
        with:
          title: ğŸ“¦ VÃ©rification semestrielle des dÃ©pendances
          content-filepath: issue.md
          labels: maintenance, dependencies
          token: ${{ secrets.GITHUB_TOKEN }}
